<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
	<html><head>
    <META http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>ddl.Linker</title>
    </head><body>
    <h1>ddl.Linker</h1>
    <!-- Generated by Ddoc from ddl\Linker.d -->
<b>Authors:</b><br/>
        Eric Anderton
<br/><br/>
<b>License:</b><br/>
        BSD Derivative (see source for details)
<br/><br/>

<span class="d-modulemembers"><dt><span class="d-decl">class <span class="d-symbol" decl="LinkModuleException">LinkModuleException</span>: object.Exception;
</span></dt>

<dd>Exception class used exclusively by the Linker.
<br/><br/>
<span class="d-symbol" decl="LinkModuleException">LinkModuleException</span> are generated when the linker cannot resolve a module during the linking process.
<br/><br/>

<dl><span class="d-members"><dt><span class="d-decl">DynamicModule <span class="d-symbol" decl="reason">reason</span>();
</span></dt>

<dd>Module that prompted the link exception.
	
<br/><br/>

</dd>
<dt><span class="d-decl">this(DynamicModule <span class="d-param">reason</span>
);
</span></dt>

<dd>Constructor.
<br/><br/>
<span class="d-params"><table><tr><td nowrap valign="top" style="padding-right: 8px">DynamicModule <span class="d-param">reason</span>
</td>
<td><span class="d-paramdesc">the module that prompts the exception</span></td></tr>
</table><br/><br/></span>

</dd>
</span></dl>
</dd>
<dt><span class="d-decl">class <span class="d-symbol" decl="Linker">Linker</span>;
</span></dt>

<dd>General-Purpose runtime linker for DDL.
<br/><br/>

<dl><span class="d-members"><dt><span class="d-decl">protected DynamicLibrary[] <span class="d-symbol" decl="libraries">libraries</span>;
</span></dt>

<dd>Library list for <span class="d-symbol" decl="libraries">libraries</span> used for linking.
<br/><br/>
The implementation here is deliberately simple -- some would call it brain-dead.
		The developer is therefore strongly encouraged to subclass this in order to
		develop more sophisticated linking and library management behaviors.
<br/><br/>

		The order of insertion into the library list is used as a priority scheme
		when attempting to link new modules into the runtime.  The first library
		added to the linker should be the current in-situ library, should linking
		to classes and types in the current runtime be a requirement.  In any case
		the next candidates for addition to the linker should be the runtime <span class="d-symbol" decl="libraries">libraries</span>
		in no particular order.
<br/><br/>

		The linker will attept to link against the first library first, and so on
		down the list.
	
<br/><br/>

</dd>
<dt><span class="d-decl">this(LoaderRegistry <span class="d-param">registry</span>
);
</span></dt>

<dd>The linker uses an LoaderRegistry to handle internal library dependencies
		automatically, such that the developer can more easily automate linking behavior.
<br/><br/>
<span class="d-params"><table><tr><td nowrap valign="top" style="padding-right: 8px">LoaderRegistry <span class="d-param">registry</span>
</td>
<td><span class="d-paramdesc">the LoaderRegistry to use when loading binaries.</span></td></tr>
</table><br/><br/></span>

</dd>
<dt><span class="d-decl">LoaderRegistry <span class="d-symbol" decl="getRegistry">getRegistry</span>();
</span></dt>

<dd><b>Returns:</b><br/>
        the current registry
	
<br/><br/>

</dd>
<dt><span class="d-decl">protected void <span class="d-symbol" decl="initModule">initModule</span>(ModuleInfo <span class="d-param">m</span>
, int <span class="d-param">skip</span>
);
</span></dt>

<dd>Initalizes a ModuleInfo instance from a DynamicModule.
<br/><br/>
From here on the provided library
	
<br/><br/>

</dd>
<dt><span class="d-decl">void <span class="d-symbol" decl="link">link</span>(DynamicModule <span class="d-param">mod</span>
, inout ModuleInfo[DynamicModule] <span class="d-param">moduleSet</span>
, bool <span class="d-param">canSelfResolve</span>
 = false);
</span></dt>

<dd>Links a module against the linker's internal cross-reference.
<br/><br/>
This implementation performs a long search of modules, then discrete symbols in the
		cross-reference.
<br/><br/>

		The parameter <span class="d-param">canSelfResolve</span>
 is passed as '$B(<span class="d-keyword">true</span>)' for registraion variants of <span class="d-symbol" decl="link">link</span>
		routines.
<br/><br/>

		<span class="d-param">moduleSet</span>
 a set of modules that need initalization following the <span class="d-symbol" decl="link">link</span> pass.
	
<br/><br/>

</dd>
<dt><span class="d-decl">void <span class="d-symbol" decl="link">link</span>(DynamicLibrary <span class="d-param">lib</span>
);
</span></dt>

<dd>Links a library against the linker's internal cross-reference.
<br/><br/>
There is a subtle difference between linking a <span class="d-param">lib</span>
 and linking a <span class="d-param">lib</span>
 that has been
		added to the cross-reference.  If every module in the <span class="d-param">lib</span>
 is merely dependent upon
		modules that exist in the cross-reference already, then just calling <span class="d-symbol" decl="link">link</span> will do
		the task.  Otherwise, the <span class="d-param">lib</span>
 should be added to the cross-reference first, before
		proceeding with the actual <span class="d-symbol" decl="link">link</span>.

<br/><br/>
<b>Examples:</b><br/>
        <pre class="d_code">		DynamicLibrary <i>lib</i>
;
		Linker linker;

		linker.register(<i>lib</i>
); <span style="color: green">// add to xref first
</span>		linker.<u>link</u>(<i>lib</i>
); <span style="color: green">// link in the library and its aggregate modules
</span></pre>
	
<br/><br/>

</dd>
<dt><span class="d-decl">DynamicLibrary <span class="d-symbol" decl="load">load</span>(char[] <span class="d-param">filename</span>
, char[] <span class="d-param">attrStdVersion</span>
 = "");
</span></dt>

<dd>Loads a library for the <span class="d-param">filename</span>
.
<br/><br/>
If the <span class="d-param">attrStdVersion</span>
 parameter is supplied this is matched against the "std.version"
		attribute in the supplied library.  If the attribute doesn't exist, and or the
		<span class="d-param">attrStdVersion</span>
 attribute is omitted or set to "", then the library is loaded anyway.
		Otherwise, should <span class="d-param">attrStdVersion</span>
 not match the "std.version" attribute, the method
		throws an exception.

<br/><br/>
<span class="d-params"><table><tr><td nowrap valign="top" style="padding-right: 8px">char[] <span class="d-param">filename</span>
</td>
<td><span class="d-paramdesc">the <span class="d-param">filename</span>
 of the library to <span class="d-symbol" decl="load">load</span></span></td></tr>
<tr><td nowrap valign="top" style="padding-right: 8px">char[] <span class="d-param">attrStdVersion</span>
</td>
<td><span class="d-paramdesc">(optional) value to match to attribute "std.version" in the loaded library.</span></td></tr>
</table><br/><br/></span>

</dd>
<dt><span class="d-decl">void <span class="d-symbol" decl="register">register</span>(DynamicLibrary <span class="d-param">lib</span>
);
</span></dt>

<dd>Registers a library with the linker to be used during link operations.
	
<br/><br/>

</dd>
<dt><span class="d-decl">DynamicLibrary <span class="d-symbol" decl="loadAndRegister">loadAndRegister</span>(char[] <span class="d-param">filename</span>
, char[] <span class="d-param">attrStdVersion</span>
 = "");
</span></dt>

<dd>Loads a DDL library and registers it with this linker.
<br/><br/>
<b>Returns:</b><br/>
        the DynamicLibrary that corresponds to <span class="d-param">filename</span>

<br/><br/>
<span class="d-params"><table><tr><td nowrap valign="top" style="padding-right: 8px">char[] <span class="d-param">filename</span>
</td>
<td><span class="d-paramdesc">the file name of the library to load</span></td></tr>
</table><br/><br/></span>

</dd>
<dt><span class="d-decl">DynamicLibrary <span class="d-symbol" decl="loadAndLink">loadAndLink</span>(char[] <span class="d-param">filename</span>
, char[] <span class="d-param">attrStdVersion</span>
 = "");
</span></dt>

<dd>Loads a DDL library and links it against all registered libraries.
<br/><br/>
<b>Returns:</b><br/>
        the DynamicLibrary that corresponds to <span class="d-param">filename</span>

<br/><br/>
<span class="d-params"><table><tr><td nowrap valign="top" style="padding-right: 8px">char[] <span class="d-param">filename</span>
</td>
<td><span class="d-paramdesc">the file name of the library to load</span></td></tr>
</table><br/><br/></span>

</dd>
<dt><span class="d-decl">DynamicLibrary <span class="d-symbol" decl="loadLinkAndRegister">loadLinkAndRegister</span>(char[] <span class="d-param">filename</span>
, char[] <span class="d-param">attrStdVersion</span>
 = "");
</span></dt>

<dd>Loads a DDL library, links it against all registered libraries, and registers it.
<br/><br/>
<b>Returns:</b><br/>
        the DynamicLibrary that corresponds to <span class="d-param">filename</span>

<br/><br/>
<span class="d-params"><table><tr><td nowrap valign="top" style="padding-right: 8px">char[] <span class="d-param">filename</span>
</td>
<td><span class="d-paramdesc">the file name of the library to load</span></td></tr>
</table><br/><br/></span>

</dd>
</span></dl>
</dd>
</span>

    </body></html>

